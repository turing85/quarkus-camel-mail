= Camel SMTP Bug

== Building & test the application non-native
.Building the application
[source, bash]
----
./mvnw clean package
----

== Test the application non-native
.Start mail server through `docker-compose.yml`
[source, bash]
----
docker-compose \
  --file locald-deployment/docker-compose.yml \
  up --detach
----

.Start the application
[source, bash]
----
java -jar target/app/quarkus-run-jar
----

.Send a test mail
[source, bash]
----
curl \
  --verbose \
  --request POST 'http://localhost:8080/send' \
  --header 'Content-Type: text/plain' \
  --data-raw 'foo@bar.baz'
----

Observe that everything works as expected

== Build the application native
.Building the application
[source, bash]
----
./mvnw --define native clean package
----

== Start the application native
.Start mail server through `docker-compose.yml`
[source, bash]
----
docker-compose \
  --file locald-deployment/docker-compose.yml \
  up --detach
----

.Start the application
[source, bash]
----
target/camel-mail-1.0.0-SNAPSHOT-runner
----